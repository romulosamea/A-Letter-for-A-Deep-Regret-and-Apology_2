const letters = {
    1: {
        title: "Letter of Regret and Apology",
        content: `
            <h6>Letter of Regret</h6>
            <p>Dear: Angel M. Alicaba</p>

            <p>I hope you read my Letter with your good mood and good mind, without your anger on me, you can read it when you have a time, it's my deepest regret first time in my life. I know that you don't want to read a long <span class="clickable-word" data-word="message">message</span> or words but please read this as I plead you so please, it's not about I repeat those words and it's not about I'm forcing you, but I just want to let out what I feel, but I'm sure you still remember and I hope you can only read it and without no one else saw either your friends etc, you can also play the musics if you want and also I hope the musics makes feel better to you because I love musics this part of my life, and it's better you read it in laptop or in PC  to get the whole view or formal view. But before you continue to read this, please click the highlighs words to understand this. (Why?) Is Becuase it always stuck in my mind again and again and you, so please. Ayaw lag adto sa lain uy, ok man ko dili man gud ko kuan nga pagka tao, kanang samokan, dali rasad kayo ka ma irita.</p>

            <p>I write this letter with a heavy deep regret and Apology, filled with <span class="clickable-word" data-word="remorse">remorse</span> for what I've done, that I created accounts many times just to message/chat you, that caused to anger at me, but I didn't really meant it, what I've said to you is not true, and I don't want to do those (that) things, just for that reason, you know that I'm joking sometimes right? so. I was just carried away by my <span class="clickable-word" data-word="loneliness">loneliness</span> that's why I did that, I'm sorry for I'm making you upset on me. And also your cousin's tell's me that you scared at me, and I want to explain it to her but it will be nonsense, if i tell her, so that's why I keep it and I want to speak it to you but you don't want to talk to me, (not all <span class="clickable-word" data-word="makigstorya">makigstorya</span> really talk about everything, right?). Every word I write is a testament to the <span class="clickable-word" data-word="sorrow">sorrow</span> that weakened my mind and lost of interest since it was happen. Since that happen I become irretable mood, like I don't know what to do, so that's why I created many accounts.</p>

            <p>I realize now that my actions/words were <span class="clickable-word" data-word="thoughtless">thoughtless</span> and <span class="clickable-word" data-word="forgettable">forgettable</span>. I should control it, but my <span class="clickable-word" data-word="quiet">quiet</span>  place take me to disturb you, (I also do some things but they're just easy to finish) I really deeply apologize and regret Angel for what I've done, I never be like this, but the words you said is, I actually <span class="clickable-word" data-word="forget">forget</span>. And <span class="clickable-word" data-word="those">those</span> days that I always messaging/chatting to you that makes you irritable and cause you to anger on me, I really didn't meant that/it, so please... The <span class="clickable-word" data-word="consequences">consequences</span> of my choices have been far-reaching, and I deeply regret the <span class="clickable-word" data-word="hurt">hurt</span>  I have caused, I'm really very sorry for all what I've done Angel I really didn't intend that. Furthermore I understand that we have things to do, and we're not always <span class="clickable-word" data-word="focused">focused</span> on one thing. I think we need to reconcile because it doesn't seem good anymore. It's your misconception about me, and I believe.</p>

            <p>And please don't scared at me, because you call me a "Creepy" even me don't know why did you called me like that, but the fact it's all about my morale, when you said those words  "creepy", but there's a qeustions I want you to know, and please let me know your answer: Can I know which part of me is creepy? even me, I'm confused why, can you clear it?  (it's not like I keep doing that, it means it's true right? don't be scared to me, It really feels <span class="clickable-word" data-word="different">different</span> that's your impression on me, when I see you it's like you hurry to move with your friends.) I believe and I think its your <span class="clickable-word" data-word="Misconceptions">Misconceptions</span>. And I'm sorry about your cousin, friends, and even your sister that I reach them just to chat you, I already  <span class="clickable-word" data-word="forgot">forgot</span> what you told me. And I hope you don't think that I'm creepy. You did something, but I didn't admit my feelings and I suddenly shock about that like: Huh? What??? but it's alright, It's about your anger thats why you said that. I don't want to do those <span class="clickable-word" data-word="words">words</span> what I've said okay?, and I want to know what they said to you. Like: (unsa diay ang gina <span class="clickable-word" data-word="words">ingon</span>  nila sa imo?). Even though I move on this, it still comes back, I will not do this again Angel.</p>

            <p>All I want is back to normal this time and day June 14 2025 ti'll the day we good, that your mind is clear about me and also to your cousin, the fact is, I don't want you to go others, if you want I will give you a butterfly sign to you so that you know that I understand what you just have said to me then, but I really forget. I hope you tell me if we're good when you read it , so that I'm aware about it and I hope you don't mad at me. I'm sorry about that, I forgot the patience but I know it's my fault and mistakes, but I will never let this happen again, and I'm sorry if I weird sometimes but I'm not actualy <span class="clickable-word" data-word="weird">weird</span> (maybe for you it's easy to forget. [but for me it's not easy, or maybe you were just <span class="clickable-word" data-word="surprised">surprised</span> right? but I won't really do anything bad to you]). Howerver I'm not actually <span class="clickable-word" data-word="obssesed">obssesed</span> with you but a little, and I want to know about those night that I <span class="clickable-word" data-word="accompanied">accompanied</span> you, that time I followed you, why did you call it "Stalking" can you clear it too?. I see you're happy with your friends, while me still remember those <span class="clickable-word" data-word="happening">happening</span>, It's hard to sleep at night because that keep's haunting at me, but there's a things that I can't never forget about you, and I don't know if you still remember that/those. I can't express more and everything but I think these words is enough to you. (I'm really sorry Angel, I hope you won't tell it to your friends about this) sorry if I annoyed you and irritated you, I forgot already but I won't be like that forever. Pasenya na sa time nga sege kog chat sa imo, pwede ma balik sa <span class="clickable-word" data-word="normal">normal</span> ang tanan?, It's my deepest regret in my life so forgive what I've done and I will never let this happen again and I don't want to do this again Angel, so can we?......</p>

            <p>Please know that my <span class="clickable-word" data-word="apology">apology</span> comes from the depths of my heart. I am truly sorry for the words and <span class="clickable-word" data-word="anger">anger</span> I have brought into you Angel and I didn't meant it, but here's my last words: Sorry, please ayaw nag ka maling akala sa akoa, wala man jud tika gi unsa jud.<span class="clickable-word" data-word="nitchi">Nitchi</span></p>
            
            <p>I'm not that kind of person Angel, e-storya nako sa imo tanan.</p>

            <p>Can we? Yes/No.</p>

            <p>With <span class="clickable-word" data-word="sincerity">sincerity</span> and hope, your schoolmate/Classmate, or....</p> 
            
            <P>- Roms</p>

            <p>A Letter for A Deep Regret and Apology June 14, 2025. September 2025.</p>
        `
    },
   
};



document.addEventListener("DOMContentLoaded", () => {
  const hero = document.querySelector(".hero");

  // List of images (pwede nimo ilisdan ang links)
  const images = [
    "GettyImages-533421150-5a8b31c0eb97de00376e692b.jpg",
    "tulips_hero.jpg",
    "butterfly-on-tulip-stockcake.jpg",
    "99972784-5228-4db4-8a0e-ea538b98d79f_sm.jpg",
    "HD-wallpaper-dutch-windmill-over-tulips-field-dutch-beautiful-spring-tulips-clouds-sky-colorful-sunset-netherland-holland-field.jpg",
    "netherlands-keukenhof-tulips-windmill-fields-colorful-flowers.jpg",
    "istockphoto-1226253348-612x612.jpg",
    "yellow-tulip-and-hyacinths-reinder-wijma-photography.jpg",
    "p0hmc6d7.jpg",
    "netherlands-keukenhof-tulips-windmill-gardens-creek.jpg",
    "Tickets-tours-Keukenhof.png",
    "calendar-tulips-in-holland.png",
  ];

  let current = 0;

  // Create img element overlay
  const bgImg = document.createElement("img");
  bgImg.style.position = "absolute";
  bgImg.style.top = 0;
  bgImg.style.left = 0;
  bgImg.style.width = "100%";
  bgImg.style.height = "160%";
  bgImg.style.objectFit = "cover";
  bgImg.style.zIndex = "-1"; // para dili matabunan ang contents
  bgImg.style.transition = "opacity 2s ease-in-out";
  hero.appendChild(bgImg);

  // Function to switch image
  function changeBackground() {
    bgImg.style.opacity = 0; // fade out
    setTimeout(() => {
      bgImg.src = images[current];
      bgImg.style.opacity = 1; // fade in
      current = (current + 1) % images.length;
    }, 1000);
  }

  // Initialize
  bgImg.src = images[0];
  setInterval(changeBackground, 8000);
});



document.addEventListener("DOMContentLoaded", () => {
  const toggleBtn = document.getElementById("toggle-btn");
  const letterPaper = document.querySelector(".letter-paper");

  let isWhole = false; // default scroll mode

  toggleBtn.addEventListener("click", () => {
    if (!isWhole) {
      // Whole modal
      letterPaper.classList.remove("scroll-mode");
      letterPaper.classList.add("whole-mode");
      toggleBtn.textContent = "Switch to Scroll Modal";
      isWhole = true;
    } else {
      // Scroll modal balik
      letterPaper.classList.remove("whole-mode");
      letterPaper.classList.add("scroll-mode");
      toggleBtn.textContent = "Switch to Whole Modal";
      isWhole = false;
    }
  });
});


// Word definitions
const wordDefinitions = {
    words:"I mean: Like katong mga chat nako sa imo: (Last nalang ng bata-bata nimo Katood biya ko sa inyong balay, (What if mo sakay ko sa imong papa nya storyahon nako). Angel wala man gani ko katood asa inyong balay dapitðŸ¤¦ adtoon naba kaya? , dili man gud ko na buhaton ba, di man ko buang gud para lang ma kasab-an ka sa imong ginikanan or para lang ma kuha ang pansin.",
    remorse: "Deep regret or guilt for a wrong committed. Nagsisisi na ako nang lubos Angel, Gusto ra nako nga magtagdanay ta, don't go to other.",
    sorrow: "A feeling of deep distress caused by loss, disappointment, or other misfortune, wag kana sa iba hehe.",
    thoughtless: "Not showing consideration for the needs of other people",
    forgettable: "Adjective: Easily forgotten, especially through being uninteresting or medicore. Kanang naka limot rajud ko sa imong gi ingon maong sege kog chat sa imo nya nakay ginabuhat, nya nasamokan najud ka. I know na sulti rato nimo tungod jud saka lagot nimo sa ako, sorry kung na bother tika, pero....dugay raman ko nay interest sa imo, nag patience lang jud ko kay basin ikaw ba wala, and nag hope jud biya ko nga walay sig intertain sa imo nga lain or sig flirt flirt. I feel hurt pero wala ko nagpa halata sakong mga classmates ug sa imo, lisod man e hilom uy, wala ko nag expect gina pugnan biya nako akong feelings, pero mo gawas jud, dili biya puros words, ga action pud biya ko, nag patience lang ko.",
    those: "Katong mga adlaw nga sege kog chat, then naa sad koy ma mali ug sabot sa chat or wala nako na tan-aw ang uban chat nimo maong naka sulti ko dayon, but I see ikaw sad naa say missed nga chat like parihas rata murag nagka error.",
    consequences: "A result or effect of an action or condition, like di naka mo chat ug balik tungod lang ato, pero abi man gud nako ug ok paka ana nga time, grabi biya kayo ka maka pamalikas, may pagka maldita pala, wakoy labot anang pang basted nimo uy, mura sad kag correct no mayraba jud ug ni confess ko, sa bagay.....pero kung gusto ka maka hibalo sege, gusto tika dugay ra di lang ko pahalata kay basin ma kuan ka ma lain, or basin naa nay sig flirt-flirt sa imo unta ayaw pa ikog-ikog please, sa personal nalang sad e sulti sa ako ang imong ma ingon, actually maka halata man ko nga pag nay sig flirt-flirt sa imo, sa skwelahan man or sa gawas. Sultihi ko e direct kog sulti.",
    forget: "As in, maka limot ko, then ma realized nako nga naa day kay gi ingon diba? So please kung naa may sig flirt flirt sa imo, ingna nalang daan nga as a friend ra or gusto ra nimo ma himong friend, and this one of my confession is: Sakit uy pag nay sig flirt flirt sa imo or manghagad, or maybe naa pud siguroy nagka gusto sa imo lain (maybe ra) sorry kung karon ra nako ni na sulti this day June 14 2025, kay dili ko gusto nga ma kalitan ka. E sulti nalang sa ako sa personal kung unsay ma ingon nimo ha, then e tug-an nako nga ikaw akong gina pa dung-gan sa mga music notes sa messenger.",
    hurt: "I remember katong imo kong gi ingnan ug mangita ug laing bae nga ma samok, pero ana jud diay? di mana sayon uy, sa imo sayon rajud diay? pasensya na kung sa imo, maong na sulti nimo ang sakit nga words but dili man ko ing ana lang tao, maong sorry, sa akong mga na buhat, nga naka pa init sa imong boot, or dugo. Kabalo ko nga suko najud kayo ka, pero wag naman sanang ganun nalang. Ayaw saba about ani nga letter. Sakit biya pag nay sig intertain sa imo lain, you know what?: behind my happines there's unsaid feelings and confessions, this day Angel, kay wala koy ma buhat kay wala pa tay klase. Lisod man makig intertain ug lain bae uy, ug dili sad ko bagag nawng para lang ana, lisod ka e limot. Sege na, ayaw pag adto sa lain, ug ayaw pag saba-saba kabalo biya ko basta babae, at least naging totoo ako, ug wala tika gina dulaan or gi yaga-yagaan, naa koy reason sa mga myday nako.",
    makigstorya: "I mean dili tanan mag storyahanay kay mag uyab o uyab diba, naa raman koy gustong ayoson pero skwelahan man nay maka kita, nya ma issue diba? actually dili man jud ko feeling close jud labi na pag babae, kay basin lahi nang huna huna sa babae, like ikaw (if), nya ma issue,pero kung kinahanglan jud storyahon jud nako tika.",
    message: "Dili man sa ingon nga gipa basa tika ani, mura nag uyab or something, pero ngano sege manig balik-balik sakong huna-huna, pati ikaw like wa nako ka sabot, tingog nagud please gi himo na nako tanan malipay para ma limtan, mo balik jud sya sa  huna-huna nako, basig maka ana nasad kag weird, wala na biya kay laing ma sulti kundi katong rajud duha 'weird ug creepy' grabi ra kayo ka maka ingon. And You know what Angel?: Kaya pasensya na kung may pag tingin ako sa iyo. Di nako ma limtan uy pag ma kit-an tika, bsain maka ingon kag samok ko ba, dili jud biya sa tidood.",
    apology: "A regretful acknowledgment of an offense or failure. Maong Sorry sa na sulti nako sa imo gel, ma irita man sad ko kung ma suko akong ka storya gud same ra sa imo, sorry nasamokan ka nako. Balik nata uy maka limot rako sa imong na ingon. Dili biya sayon mang flirt ug uban babae kung na lalaki palang ka",
    nitchi: "A Japanese words that only me what is the meaning even though you search it in the internet, it's based on what I see in you, I'm not obssesed about that and it's not what you think of me Angel, that words has meaning, you don't need to overthink about that, that words is better that than you called me creepy I almost in trauma about that words you called me.",
    ingon:"Like parihas sa imong gi chat sa ako kung tinood ba ang ilang gi storya sa imo, then wako kabalo kung kinsa ga ingon sa imo diba?, mo sulti man ko kung mo sulti sad ka. Back then ha, katong ni ana ka nga tinood ba ilang gina ingon sa imoha, gusto lang nako ma hibal-an.",
    loneliness: "Kanang, ako rajud isa sa amo, ma bored man sad ko sig tan-aw ug movies, so mao to, diman sa uyab no, pero naka ana man gud ka nga murag uyab kay taga adlaw sig chat, didto na nako na remember imong gi ingon, maong pasensya na kayo kung nasamok tika pero unta uy.... maayos na. The fact is na Ulaw nako sa imo.",
    normal: "Sorry kaayo uy, pwede back to normal na without knowing everyone? naranasan ra ko na sa imo, pero we can forgive someone naman diba?, Sorry. Di nako mag segeg samok samok, pero ayaw bitaw ug adto sa lain uy, di man nako ni ma buhat kung wala pako nagka kuan sa imo gusto, and sege na uy balik nata pag ingon lang gud kung busy ka.",
    focused: "Like kanang, naa tay oras sa ubang butang ba, then nakay ginabuhat then waka ka sa mood usahay makig storya and sege nalag notif ang cellphone nimo, maybe naa kay gina tan-aw guro nya sege nalang ug popup ang chat nako nya dika ka tarong mao na guro, pero di man ko ing ana jud, ka limot rajud ko, I'm sure kana jud imong gina buhat.",
    misconceptions: "A view or opinion that is incorrect because based on faulty thinking or understanding. Like parihas sa imong gi ingon Creepy ko sakit sad sa part nako, bisan ka pila na nako e limot mo balik jud, di man sa di ta kabalo mag hilom no wata kabalo nga ga balik-balik day sa huna-huna sa tao ang gina ingon nimo, so unsa maka baba ug morale diba?, dali ra kayo e sulti ang Move on pero ana rajud ay ka dali, dili man tanan sad maka buhat ana labi nag na mali ra, goods man ta ka. Basin ma ingnan kag Snap Judgement ana gel.",
    anger: "Strong feelings of annoyance, displeasure, or hostility, actually di man jud ko papansin, di man gud nako ma pug-ngan ba ana bitaw, pero limit sege pamalikas sa tao.",
    sincerity: "The quality of being free from pretense, deceit, or hypocrisy. Di talaga ako maka tulog ng mahimbing Angel.",
    accompanied: "What I mean is: katong time nga gi apas tika sa citygate, nya gi sabayan tika sa sidecar, hantod didto sa hunonganan, nya pagka ugma ato or the following nag sege biya kog sorry ato sa chat no kung ok raba sa imo nya wa man kay respond or maybe. So okay rasad sa ako. Ni ana man gud ka ato that time nganong wala ko nisakay ug apil sa jeep diba? so mao to ni sunod nalang ko lain man gud kayo sa feelings ato nga time, wala ko nag expect nga imo sad day kong pa sakyon (wala biya ko nag pa-feeling kuan ato). Kung kato naka lain sa imo pero ni hilom lang ka, pasensya na, wala man gud koy nakita sa imong nawng nga nalain ka diba.",
    quiet: "Pag ma bored nako, nya wala nakoy buhaton kanang humana najud tanan, maka remember man ko nga naa day koy ka mao ni mao ana gud, nya timing nga nakay gi buhat, pero I know tungod jud ni atong na mali kog myday sa facebook, pero limutin nato uy, waman sad ko to na tuyo.",
    happening: "Like Katong mga na buhat nako na mali, ug katong mga na sulti nimo ug nako ug katong gipang chatan nako maong na lahi ka, pero nakalimot rajud ko maong pasensya na.",
    forgot: "Naka limot rajud ko Angel like: Chat lang ug nakay tuyo ha, ana bitaw.",
    different: "kana bitawng ma pansin tika nga murag ga dali kag lakaw, nya ma remember nako tong gi ingon sa imong ig-agaw nga na hadlok daw ka, pero ngano jud diay? wala man jud koy bad intentions sa imo, pwede ma clear na? Ayaw ka hadlok gel, di man nako kailangan e prove para lang jud, maong sorry na if ever ba naa ba koy chance? e sulti lang sa personal hehe.",
    obssesed: "I mean: Dili man kaayo ko obssesed sa imo jud kuan, kanang gamay ra as in gamay nya ikaw grabi rajud maka ingon, sa mga typings raman jud nako ka na suko, mao ranay gi amin nako sa imo, pero sege para ma hibal an nako ang result ani tanan: bitaw uy gusto tika, murag gipa amin naman sad ko nimo sa una, dili ko gusto nga boy type ko, gusto nako nga MAN type ko. Pero I'm sure naa sad kay na gustohan nga tao or ni confess nasad sa imo or maybe sa una or naa najud, kabalo ka unsay pasabot ani tanan?: Ayaw pa tintal sa uban, ayaw pag adto sa uban or lain, sorry kung ni bitaw nakog mga words pero, I think naa pud guroy sig kuan sa imo pero imo sad gipa hunong and I'm sure naa jud, and ayaw bitaw ug adto sa lain uy, actually gusto tikang doolon pero ga respect ko sa imo. Kabalo ko as a friend ranang nay sig hagad sa imo, e sulti nalang gud nga as a friend para sa dili na sig hagad or para ma aware nga ing ana ra kutob, na remember to nakong gi ingon nimo: ana biya ka sa mga ig-agaw raka nimo mag uban uban diba?.)",
    weird: "Pati ako ma weirdan sad sa imo, kitang mga tao naa may pagka weird, pero pwede magka ayos nalang ta sa tinood gud, di ko gusto ug saba ang tanan ba.",
    surprised: "What I mean is: Na kalitan ra guro ka maong na ing ana imong na ingon?, pero kabalo man ka nga ga jokes ko usahay diba? maong sorry kayo.  Di biya sad ko bata kung magka gusto sa tao, ma remember man gud nako kung unsa ka pag sa chat man gud. Dili lang gud ta palabig ka OA, yes nasuko ka sa akoa that time. Pero pasensya na kay naka limot rako. Sorry na, balik na.",
    
};

// DOM elements
const welcomeScreen = document.getElementById('welcome-screen');
const envelopeContainer = document.getElementById('envelope-container');
const mainContent = document.getElementById('main-content');
const enterBtn = document.getElementById('enter-btn');
const openEnvelopeBtn = document.getElementById('open-envelope-btn');
const backBtn = document.getElementById('back-btn');
const letterContent = document.getElementById('letter-content');
const navBtns = document.querySelectorAll('.nav-btn');
const definitionModal = document.getElementById('definition-modal');
const closeBtn = document.querySelector('.close-btn');
const wordTitle = document.getElementById('word-title');
const wordDefinition = document.getElementById('word-definition');

// Current letter
let currentLetter = 1;

// Initialize the app
function init() {
    loadLetter(currentLetter);
    setupEventListeners();
}

// Setup event listeners
function setupEventListeners() {
    // Welcome screen
    enterBtn.addEventListener('click', showEnvelope);
    
    // Envelope
    openEnvelopeBtn.addEventListener('click', openEnvelope);
    
    // Back button
    backBtn.addEventListener('click', showWelcomeScreen);
    
    // Navigation buttons
    navBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            const letterNum = parseInt(btn.dataset.letter);
            switchLetter(letterNum);
        });
    });
    
    // Modal close
    closeBtn.addEventListener('click', closeDefinitionModal);
    
    // Close modal when clicking outside
    definitionModal.addEventListener('click', (e) => {
        if (e.target === definitionModal) {
            closeDefinitionModal();
        }
    });
}

// ðŸŽµ MUSIC PLAYLIST
let musicIndex = 0;

const playlist = [
   "Underneath the Waves.mp3", 
   "Hale  Empty Tears, Empty Heart (Lyric Video).mp3", 
   "Westlife - Fool Again (Lyrics).mp3",
   "Westlife - If I Let You Go (Official Video).mp3", 
   "Westlife - My Love (Lyrics).mp3",
   "Hoobastank - The Reason (Lyrics) (1).mp3",
   "Leaves.mp3",
   "Bent Down.mp3",
   "Take That - Patience (Official Video).mp3",
   "Train - Hey, Soul Sister (Official Video).mp3",
   "Simple Plan - Perfect (Official Video) [HD].mp3",
   "Hale - Tama Na Ba (Official Lyric Video).mp3",
   "Hale - The Day You Said Goodnight - (Official Lyric Video).mp3",
   "Owl City - Vanilla Twilight (Official Music Video).mp3",
];

// MATCHING ALBUM IMAGES
const playlistImages = [
    "underneath.jpg",
    "ETEH.jpg",
    "fool again.jpg",
    "FILYG.jpg",
    "malab.jpg",
    "the reason.jpeg",
    "leaves.jpg",
    "bent.jpg",
    "patience.jpg",
    "hey souls.jpg",
    "perfect.jpg",
    "Tama na ba.jpg",
    "The day.jpg",
    "vanilla.jpeg",
];

const bgMusic = new Audio();
bgMusic.src = playlist[musicIndex];
bgMusic.volume = 0.5;
bgMusic.loop = false;

// -------------------------------
// UPDATE TITLE
// -------------------------------
function updateSongTitle() {
    const titleBox = document.getElementById("current-song-title");
    titleBox.textContent = "Now Playing: " + playlist[musicIndex].replace(".mp3", "");
}

// -------------------------------
// UPDATE BACKGROUND IMAGE
// -------------------------------
function updateMusicBg() {
    const player = document.querySelector(".music-player");
    player.style.backgroundImage = `
        url('${playlistImages[musicIndex]}')
    `;
}

updateSongTitle();
updateMusicBg();

// -------------------------------
// AUTO NEXT SONG
// -------------------------------
bgMusic.addEventListener("ended", () => {
    playNextSong();
});

// -------------------------------
// VOLUME CONTROL
// -------------------------------
document.getElementById("music-volume").addEventListener("input", (e) => {
    bgMusic.volume = e.target.value;
});

const playPauseBtn = document.getElementById("play-pause-btn");
const nextBtn = document.getElementById("next-song-btn");
const stopBtn = document.getElementById("stop-song-btn");

// PLAY / PAUSE
playPauseBtn.addEventListener("click", () => {
    if (bgMusic.paused) {
        bgMusic.play();
        playPauseBtn.textContent = "Pause â¸";
        updateSongTitle();
        updateMusicBg();
    } else {
        bgMusic.pause();
        playPauseBtn.textContent = "Play â–¶";
    }
});

// STOP
stopBtn.addEventListener("click", () => {
    bgMusic.pause();
    bgMusic.currentTime = 0;
    playPauseBtn.textContent = "Play â–¶";
});

// NEXT SONG
nextBtn.addEventListener("click", () => {
    playNextSong();
});

// FUNCTION: NEXT SONG
function playNextSong() {
    musicIndex = (musicIndex + 1) % playlist.length;
    bgMusic.src = playlist[musicIndex];
    bgMusic.play();
    playPauseBtn.textContent = "Pause â¸";
    updateSongTitle();
    updateMusicBg();
}

// ------------------------------------------------------
// âœ… AUTOPLAY FIX â€” ALWAYS WORKS EVEN IF BROWSER BLOCKS
// ------------------------------------------------------
const envelope = document.getElementById("envelope-container");

const observer = new MutationObserver(() => {
    if (envelope.style.display !== "none") {

        bgMusic.play().catch(() => {
            // If blocked, wait for 1 click
            document.addEventListener("click", function startMusic() {
                bgMusic.play();
                document.removeEventListener("click", startMusic);
            });
        });

    }
});

// Start watching envelope
observer.observe(envelope, { attributes: true, attributeFilter: ["style"] });









const switchBtn = document.getElementById("switch-notebook-btn");
const notebookOverlay = document.getElementById("notebook-overlay");
const notebookContent = document.getElementById("notebook-content");
const backbuttons = document.querySelector("#notebook-overlay .back-buttons");

// Back button handler
backbuttons.addEventListener("click", () => {
  notebookOverlay.style.display = "none";

  const letterContent = document.getElementById("letter-content");
  if (letterContent) {
    letterContent.style.display = "block";
  }
});



switchBtn.addEventListener("click", () => {
  notebookContent.innerHTML = `<div class="loading-message">Loading the text please wait...</div>`;
  notebookOverlay.style.display = "flex";

  setTimeout(() => {
    const letterHTML = document.getElementById("letter-content").innerHTML;
    notebookContent.innerHTML = letterHTML;
    activateHighlights(notebookContent);
  }, 5000);
});


function activateHighlights(container) {
  const highlights = container.querySelectorAll(".highlight");
  highlights.forEach(span => {
    span.addEventListener("click", (e) => {
      const word = span.dataset.word;
      if (word && wordDefinitions[word]) {
        showDefinition(e.pageX, e.pageY, word, wordDefinitions[word]);
      } else {
        console.warn("No definition found for:", word);
      }
    });
  });
}


function showDefinition(x, y, word, meaning) {
  const oldPopup = document.querySelector(".definition-popup");
  if (oldPopup) oldPopup.remove();

  const popup = document.createElement("div");
  popup.className = "definition-popup";
  popup.innerHTML = `<strong>${word}</strong>: ${meaning}`;

  document.body.appendChild(popup);
  popup.style.left = x + "px";
  popup.style.top = y + "px";

  setTimeout(() => popup.remove(), 4000);
}






 document.addEventListener("DOMContentLoaded", () => {
  const enterBtn = document.getElementById("enter-btn");
  const welcomeScreen = document.getElementById("welcome-screen");
  const envelopeContainer = document.getElementById("envelope-container");
  const openEnvelopeBtn = document.getElementById("open-envelope-btn");
  const mainContent = document.getElementById("main-content");
  const envelope = document.getElementById("envelope");

  // Step 1: Welcome â†’ Envelope
  enterBtn.addEventListener("click", () => {
    welcomeScreen.style.display = "none";
    envelopeContainer.style.display = "flex";
  });

  // Step 2: Envelope open animation and paper slide up, then show letter content
  openEnvelopeBtn.addEventListener("click", () => {
    // Add open class to animate flap and paper
    envelope.classList.add("open");

    // Wait 5 seconds before showing the letter content and hiding envelope container
    setTimeout(() => {
      envelopeContainer.style.display = "none";
      mainContent.style.display = "block";
    }, 5000);
  });

  // Back button to envelope (optional)
  backBtn.addEventListener("click", () => {
    mainContent.style.display = "none";
    envelopeContainer.style.display = "flex";
    // Reset envelope state so it is closed again
    envelope.classList.remove("open");
  });
});



// Event listener
openEnvelopeBtn.addEventListener("click", openEnvelope);
openEnvelopeBtn.addEventListener("click", () => {
    openEnvelopeBtn.classList.toggle("open");

    // Optional: show main content after a delay
    setTimeout(() => {
        document.getElementById("envelope-container").style.display = "none";
        document.getElementById("main-content").style.display = "block";
    }, 1200); // wait for animation
});


// Show envelope
function showEnvelope() {
    welcomeScreen.style.opacity = '0';
    setTimeout(() => {
        welcomeScreen.style.display = 'none';
        envelopeContainer.style.display = 'flex';
        setTimeout(() => {
            envelopeContainer.style.opacity = '1';
        }, 50);
    }, 800);
}

// Open envelope and show main content
function openEnvelope() {
    const envelope = document.querySelector('.envelope');
    
    // Add opening class for animation
    envelope.classList.add('opening');
    
    // Wait for animation to complete
    setTimeout(() => {
        // Fade out envelope container
        envelopeContainer.classList.add('fade-out');
        
        setTimeout(() => {
            envelopeContainer.style.display = 'none';
            mainContent.style.display = 'block';
            setTimeout(() => {
                mainContent.style.opacity = '1';
            }, 50);
        }, 800);
    }, 600);
}

// Show welcome screen
function showWelcomeScreen() {
    mainContent.style.opacity = '0';
    setTimeout(() => {
        mainContent.style.display = 'none';
        welcomeScreen.style.display = 'flex';
        welcomeScreen.style.opacity = '1';
        
        // Reset envelope state
        const envelope = document.querySelector('.envelope');
        envelope.classList.remove('opening');
        envelopeContainer.classList.remove('fade-out');
    }, 300);
}

// Switch letter
function switchLetter(letterNum) {
    // Update navigation
    navBtns.forEach(btn => btn.classList.remove('active'));
    document.querySelector(`[data-letter="${letterNum}"]`).classList.add('active');
    
    // Load new letter
    currentLetter = letterNum;
    loadLetter(letterNum);
}

// Load letter content
function loadLetter(letterNum) {
    const letter = letters[letterNum];
    if (letter) {
        letterContent.innerHTML = letter.content;
        setupClickableWords();
    }
}

// Setup clickable words
function setupClickableWords() {
    const clickableWords = document.querySelectorAll('.clickable-word');
    clickableWords.forEach(word => {
        word.addEventListener('click', () => {
            const wordText = word.textContent;
            showDefinition(wordText);
        });
    });
}

// Show definition modal
function showDefinition(word) {
    const definition = wordDefinitions[word.toLowerCase()];
    if (definition) {
        wordTitle.textContent = word;
        wordDefinition.textContent = definition;
        definitionModal.style.display = 'block';
    }
}

// Close definition modal
function closeDefinitionModal() {
    definitionModal.style.display = 'none';
}

// Initialize when DOM is loaded
document.addEventListener('DOMContentLoaded', init);

document.oncontextmenu = () => {
    alert("Dili sya pwede ma right click.")
    return false
}

document.onkeydown = e => {
    if(e.key == "F12") {
        alert("Dili lagi sya pwede ma right click lagi")
        return false
    }
}




// âœ… Login Script
document.addEventListener("DOMContentLoaded", () => {
    const loginModal = document.getElementById("login-modal");
    const loginForm = document.getElementById("login-form");
    const backBtn = document.getElementById("back-btn"); // â¬…ï¸ back button reference
    const welcomeScreen = document.getElementById("welcome-screen");
    const mainContent = document.getElementById("main-content");

    // Always show login first
    loginModal.style.display = "flex";

    loginForm.addEventListener("submit", function (e) {
        e.preventDefault();

        const username = document.getElementById("username").value.trim();
        const password = document.getElementById("password").value.trim();

        // Hardcoded login check
        if (username === "Angel" && password === "Sam_Code22_@Enjeru_Nitchi23") {
            // Hide login modal
            loginModal.style.display = "none";

            // Show Welcome screen
            welcomeScreen.style.display = "block";
        } else {
            alert("Mali siguro imong username or Password. Pag usab ug login.");
        }
    });

    // â¬…ï¸ Handle Back button (from main-content â†’ login)
    backBtn.addEventListener("click", () => {
        mainContent.style.display = "none";      // hide main content
        welcomeScreen.style.display = "none";   // hide welcome screen
        loginModal.style.display = "flex";      // show login again
        loginForm.reset();
    });
});









